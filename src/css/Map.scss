#ebd-body {
  --map-width: calc(var(--localsetting_mapsize)*0.6vh);
  --map-height: calc(var(--map-width)*0.92);

  --stan-width: calc(var(--localsetting_mapsize)*0.145vh);
  --stan-height: calc(var(--stan-width)*0.227);
  --hex-width: calc(var(--map-width) * 0.109);
}

#ebd-body.map_4 {
  // standard projects are not on the map
  --stan-width: calc(var(--localsetting_cardsize) * 0.15vh);
  --stan-height: calc(var(--stan-width) * 0.227);
}

// //   // DEBUG hex
// .hex {

//   background-color: rgba(255, 255, 0, 0.4);
// }

// #map,
// #map_hexes {
//   outline: 1px solid yellow;
// }

// .hex::before {
//   content: attr(data-ocean);
//   position: absolute;
//   top: 30%;
//   width: 100%;
//   height: 100%;
//   text-align: center;
// }
// //   // DEBUG hex end


#main_board {
  display: block;
  order: 1;
  width: calc(var(--map-width)* 1.5);
  // height: calc(var(--map-width) * 1.2);
  //outline: 1px solid red;
  position: relative;
}



#map_middle>* {
  position: absolute;
}

#map_middle {
  width: calc(var(--map-width)*1.45);
  position: relative;
  height: calc(var(--map-height)* 1.11);
}

#map_bottom {
  display: flex;
  width: 100%;
  font-size: calc(var(--map-width)*0.02);
}

#map_hexes {
  position: absolute;
  width: 96%;
  height: 94%;
  top: 2.5%;
  left: 1.5%;
}



#map {
  top: 10%;
  left: 17%;
  width: var(--map-width);
  height: var(--map-height);
}

.mcompact {

  .map_bg {
    background-image: url('img/map.png');
    width: var(--map-width);
    height: var(--map-height);
    background-size: contain;
    position: absolute;
  }

  .map_2 .map_bg {
    background-image: url('img/maps/hellas_planet.png');
  }

  .map_1 .map_bg {
    background-image: url('img/maps/elysium_planet.png');
  }


  .map_3 .map_bg {
    background-image: url('img/maps/vastitas_planet.png');
  }

  .map_4 .map_bg {
    background-image: unset;
  }

  .map_4 {
    #main_board {
      aspect-ratio: 1.177 / 1;
    }

    #main_board::before {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      background-repeat: no-repeat;
      background-size: 100% auto;
      background-image: url("img/maps/amazonis_planet.jpg");
    }


    #map_middle {
      width: 100%;
      position: absolute;
      height: 86%;
    }

    .hex_phobos {
      left: 3%;
      top: 9%;
      background-image: unset;
    }

    .hex_ganymede {
      left: 1%;
      top: 80%;
      background-image: unset;
    }

    #oceans_pile {
      width: var(--hex-width);
      height: calc(var(--hex-width) * 1.1193);
      left: 80.5%;
      top: 5%;
    }

    .outer_generation {
      top: 22%;
      right: unset;
      left: 0%;
    }

    // conmtext .map_4

    #temperature_map {
      position: absolute;
      width: 13%;
      height: 92%;
      background-image: unset;
      left: unset;
      right: 0%;
      top: 2%;

      .tracker_t[data-state="-30"] {
        bottom: -2%;
      }
    }

    #oxygen_map {
      position: absolute;
      width: 23%;
      height: 99%;
      background-image: unset;
      top: 5%;
      left: 5%;
    }

    #oxygen_map .tracker_o {
      position: absolute;
      width: calc(var(--hex-width) * 0.3);
      height: calc(var(--hex-width) * 0.3);
    }

    .outer_scoretracker {
      top: 94%;
      right: 20%;
    }

    #map {
      top: 4%;
      left: 10%;
      width: 67.5%;
      height: 81.5%;
    }


    // .hex {
    //   background-color: #55111155;
    // }

    #map_hexes {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0px;
      left: 0px;
    }

    #map_hexes {
      left: 4%;
    }


    #map_bottom {
      position: absolute;
      top: unset;
      bottom: 0.5%;
      aspect-ratio: 1 / 0.1;
      width: 100%;
    }


    .mileaw_main {
      background-image: unset;
    }

    .mileaw_display {
      height: 54%;

      .mileaw_item {
        width: 20%;
        height: 100%;
        background-image: unset;
      }

    }


    .mileaw_header {
      display: block;
      position: relative;
      top: 7%;
      width: 100%;
      height: 29%;
    }

    .mileaw_header {
      * {
        position: absolute;
        top: 0%;
        left: unset;
        right: unset;
      }

      .mileaw_title {
        top: -120%;
        right: 9%;
      }

      .mileaw_gains {
        display: none;
      }

      // context: .map_4 .mileaw_header

      #milestones_title {
        left: 9%;
        right: unset;
      }

      #milestones_costs {
        top: 16%;
        left: -7%;
      }

      #milestones_gains {
        left: 24%;
      }

      #awards_costs {
        right: 0%;
        top: 10%;
        left: unset;
      }



      .mileaw_progress {
        top: 80%;
      }

      #milestones_progress {
        right: 1%;
        left: unset;
      }
    }

    // map_4

    #decks_area {
      top: 87%;
      left: 80%;
    }

  }



}


.hex {
  width: var(--hex-width);
  height: calc(var(--hex-width) * 1.1193);
  border-radius: 30%;
  /* outline: 1px solid black;*/
  clip-path: polygon(50% 0, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
  transition: 100ms ease-in-out;
}

.map .hex {
  position: absolute;
}

.mcompact {
  @for $col from 1 through 11 {
    @for $row from 1 through 11 {
      .map_hexes #hex_#{$col}_#{$row} {
        left: calc(($col - 1) * 11.1%);
        top: calc(($row - 1) * 10.7%);
      }
    }
  }
}

.mfull {
  @for $col from 1 through 11 {
    @for $row from 1 through 11 {
      .map_hexes #hex_#{$col}_#{$row} {
        left: calc(($col - 1) * var(--hex-width) * 1.025);
        top: calc(($row - 1) * var(--hex-width) * 0.89);
      }
    }
  }
}

.hex.even {
  margin-left: calc(var(--map-width) * -0.0553);
}

.outer.hex {
  /*  background-color: rgba(128, 128, 128, 0.66);*/
}

#hex_0_1 {
  /*Stanford Torus*/
  left: 1%;
  top: 25%;
  position: absolute;
  display: none;
  pointer-events: none;
}

#hex_0_2 {
  left: 10%;
  top: 5%;
  position: absolute;
}

#hex_0_3 {
  /* left: 7%;
  top: 40%;*/
  top: 2%;
}

.hex_phobos {
  left: 6%;
  top: 13%;
  background-image: url("img/phobos.png");
  position: absolute;
  width: calc(var(--map-width) * 0.14);
  height: calc(var(--map-width) * 0.135);
  background-size: contain;
}

.hex_ganymede {
  position: absolute;
  left: 4%;
  top: 33%;
  background-image: url("img/ganymede.png");
  width: calc(var(--map-width) * 0.109);
  height: calc(var(--map-width) * 0.125);
  background-size: contain;
}



.hex:hover {
  background-color: rgba(255, 255, 0, 0.4);
}

.hex.active_slot {
  background-color: rgba(86, 207, 110, 0.4);
}

.hex.active_slot:hover {
  background-color: rgba(86, 207, 110);
}


.map .tile {
  position: absolute;
}

.tile {
  width: calc(var(--map-width) * 0.1085);
  height: calc(var(--map-width) * 0.12);
  background-image: url("img/tiles.png");
  background-size: 1000% 200%;
  clip-path: polygon(50% 0, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}


.tile.tile_2 {
  background-position: 0 0;
}

.tile.tile_1 {
  background-position: -100% 0;
}

.tile.tile_3 {
  background-position: -200% 0;
}

.tile.tile_8 {
  background-position: -300% 0;
}

.tile.tile_67 {
  background-position: -800% 0;
}

.tile.tile_85 {
  background-position: -400% 0;
}

.tile.tile_128 {
  background-position: -500% 0;
}

.tile.tile_123 {
  background-position: -600% 0;
}

.tile.tile_140 {
  background-position: -700% 0;
}

.tile.tile_5 {
  background-position: -800% 0;
}

.tile.tile_142 {
  background-position: -900% 0;
}

.tile.tile_44 {
  background-position: 0 -100%;
}

.tile.tile_natural {
  background-position: 0 -100%;
}

.tile.tile_97 {
  background-position: -100% -100%;
}

.tile.tile_199 {
  background-position: -200% -100%;
}

.tile .marker {
  position: absolute;
  top: 30%;
  left: 30%;
}




.mileaw_main {
  width: 50%;
  display: inline-flex;
  flex-direction: column;
  height: calc(var(--map-height)*0.15);
  padding: 0.3vh;
  background-image: url("img/awards_back.png");
  font-size: calc(var(--map-width)*0.02);
  background-size: cover;
  bottom: 0%;

  .marker {
    // same size as all markers on map defined in GameTokens.scss
    top: 5%;
    left: 35%;
  }
}

#main_awards {
  left: 50%;
}

.mileaw_display {
  display: flex;
  flex-wrap: wrap;
  height: 62%;
  top: 18%;
  position: relative;
}

.mileaw_item {
  width: calc(var(--map-width) * 0.138);
  height: calc(var(--map-width) * 0.08);
  background-image: url("img/milestones_awards.png");
  background-size: 500% 200%;
  position: relative;
}

.map_1 .mileaw_item {
  background-image: url("img/maps/elysium_awards.png");
}

.map_2 .mileaw_item {
  background-image: url("img/maps/hellas_awards.png");
}

.map_3 .mileaw_item {
  background-image: url("img/maps/vastitas_awards.png");
}

.map_4 .mileaw_item {
  background-image: url("img/maps/amazonis_awards.png");
}


.award_1 {
  background-position: 0% 0;
}

.award_2 {
  background-position: -100% 0;
}

.map_0 {
  .award_1 {
    background-position: -200% 0;
  }

  .award_2 {
    background-position: 0 0;
  }

  .award_3 {
    background-position: -100% 0;
  }
}


.award_3 {
  background-position: -200% 0;
}

.award_4 {
  background-position: -300% 0;
}

.award_5 {
  background-position: -400% 0;
}

.milestone_1 {
  background-position: -0% -100%;
}

.milestone_2 {
  background-position: -100% -100%;
}

.milestone_3 {
  background-position: -200% -100%;
}

.milestone_4 {
  background-position: -300% -100%;
}

.milestone_5 {
  background-position: -400% -100%;
}


.milestone_label {
  bottom: 3%;
  position: absolute;
  width: 89%;
  left: 6%;
  text-align: center;
  text-transform: uppercase;
  font-size: calc(var(--map-width) * 0.017);
}

.award_label {
  bottom: 0;
  position: absolute;
  width: 89%;
  left: 6%;
  text-align: center;
  font-family: var(--awards-font);
  font-size: calc(var(--map-width) * 0.027);
}



.mileaw_header {
  display: flex;
  justify-content: space-evenly;
  position: relative;
  top: 7%;


  .mileaw_gains {
    width: 25%;
    display: flex;
    justify-content: flex-start;
    align-items: center;

    .card_vp {
      position: relative;
      margin-left: 5%;
      width: calc(var(--map-width) * 0.04);
      height: calc(var(--map-width) * 0.04);

    }
  }

  .mileaw_costs {
    width: 25%;
    display: flex;
    justify-content: flex-end;
    align-items: center;


    .token_img {
      position: relative;
      --resourcesize: calc(var(--map-width) * 0.03);
      margin-right: 5%;
      font-weight: normal;
    }

    .token_img[data-striked="1"] {
      filter: grayscale(1) opacity(0.7);
    }
  }

  .mileaw_progress {
    position: absolute;
    width: calc(var(--map-width) * 0.04);
    height: calc(var(--map-width) * 0.03);
    background-color: #808080C5;
    border-radius: 20%;
    font-size: calc(var(--map-width) * 0.03);
    left: 95%;
    top: 50%;
    text-align: center;
    cursor: help;
    // border: 1px solid black;
    z-index: 30;
  }

  .mileaw_progress:hover {
    outline-style: outset;
    outline-color: gray;
    outline-width: 2px;
  }

  #awards_progress {
    left: 0%;
  }
}




.mileaw_title {
  /*background-color: #EE6F10;

  border: 0.4vh solid #938989;
  width: fit-content;
  border-radius: 30% 30% 0 0;
   */
  padding: 0.3vh;
  font-family: var(--mars-font);
  text-transform: uppercase;
}


#temperature_map {
  position: relative;
  width: calc(var(--map-width) * 0.157);
  height: var(--map-height);
  background-image: url("img/temperature.png");
  background-size: cover;
  transform-origin: right;
  left: 85%;
  top: 10%;
}


.temperature_scale {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

#temperature_map {
  .tracker_t {
    position: absolute;
    height: 3%;
    width: 29%;
    box-shadow: #ffcb00 0px 0px 0px 3px;
    left: 42%;
    transition: 600ms all;
    background-image: unset;
  }

  .tracker_t::after {
    content: revert;
  }

  .tracker_t[data-state="-30"] {
    bottom: 1%;
    height: 12%;
    width: 68%;
    left: 24%;
    border-radius: 50%;
  }

  @for $row from 0 through 23 {
    $temp: (
      $row * 2) - 28;

    .tracker_t[data-state="#{$temp}"] {
      bottom: calc(12.8% + $row * 4.5%
      );
  }
}
}

.map_4 {
  #temperature_map {
    @for $row from 0 through 23 {
      $temp: (
        $row * 2) - 28;

      .tracker_t[data-state="#{$temp}"] {
        bottom: calc(10% + $row * 4.1%
        );
    }
  }
}
}

#oxygen_map {
  /* gfx ratio : 0.2815315*/
  position: absolute;
  width: var(--map-width);
  height: calc(var(--map-width) * 0.2815315);
  /* border: 1px solid red;
  background: linear-gradient(90deg, rgb(180, 105, 0) 0%, rgb(238, 223, 120) 75%, rgba(0,255,252,1) 100%);*/
  background-image: url("img/oxygen.png");
  background-size: cover;
  top: 0%;
  pointer-events: none;
  left: 16.5%;
  transform-origin: top;

}

.oxygen_scale {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}


#oxygen_map {
  .tracker_o {
    position: absolute;
    width: 4%;
    height: 14%;
    box-shadow: #ffcb00 0px 0px 0px 3px;
    border-radius: 50%;
    transition: 600ms all;
    padding: 0.3%;
    background-image: unset;
    background-position: unset;
  }

  .tracker_o::after {
    content: revert;
  }

  .tracker_o[data-state="0"] {
    left: 6%;
    top: 64%;
  }

  .tracker_o[data-state="1"] {
    left: 10.5%;
    top: 50%
  }

  .tracker_o[data-state="2"] {
    left: 16.5%;
    top: 36%
  }

  .tracker_o[data-state="3"] {
    left: 22%;
    top: 25%
  }

  .tracker_o[data-state="4"] {
    left: 28.5%;
    top: 17%
  }

  .tracker_o[data-state="5"] {
    left: 34.5%;
    top: 11%
  }

  .tracker_o[data-state="6"] {
    left: 40.7%;
    top: 7%
  }

  .tracker_o[data-state="7"] {
    left: 47%;
    top: 5.5%
  }

  .tracker_o[data-state="8"] {
    left: 53.5%;
    top: 7%
  }

  .tracker_o[data-state="9"] {
    left: 60%;
    top: 10%
  }

  .tracker_o[data-state="10"] {
    left: 66.5%;
    top: 16%
  }

  .tracker_o[data-state="11"] {
    left: 72%;
    top: 24%
  }

  .tracker_o[data-state="12"] {
    left: 78.3%;
    top: 34%
  }

  .tracker_o[data-state="13"] {
    left: 84%;
    top: 46%
  }

  .tracker_o[data-state="14"] {
    left: 89%;
    top: 62%
  }
}


.map_4 #oxygen_map {
  .tracker_o[data-state="0"] {
    left: 77%;
    top: 93%
  }

  .tracker_o[data-state="1"] {
    left: 62%;
    top: 89%
  }

  .tracker_o[data-state="2"] {
    left: 49%;
    top: 84%
  }

  .tracker_o[data-state="3"] {
    left: 36%;
    top: 80%
  }

  .tracker_o[data-state="4"] {
    left: 25%;
    top: 75%
  }

  .tracker_o[data-state="5"] {
    left: 17%;
    top: 70%
  }

  .tracker_o[data-state="6"] {
    left: 9%;
    top: 65%
  }

  .tracker_o[data-state="7"] {
    left: 3%;
    top: 59%
  }

  .tracker_o[data-state="8"] {
    left: 3%;
    top: 54%
  }

  .tracker_o[data-state="9"] {
    left: 2%;
    top: 48%
  }

  .tracker_o[data-state="10"] {
    left: 2%;
    top: 44%
  }

  .tracker_o[data-state="11"] {
    left: 3%;
    top: 37%
  }

  .tracker_o[data-state="12"] {
    left: 4%;
    top: 32%
  }

  .tracker_o[data-state="13"] {
    left: 12%;
    top: 27%
  }

  .tracker_o[data-state="14"] {
    left: 20%;
    top: 21%
  }

  .tracker_o[data-state="15"] {
    left: 31%;
    top: 16%
  }

  .tracker_o[data-state="16"] {
    left: 41%;
    top: 11%
  }

  .tracker_o[data-state="17"] {
    left: 54%;
    top: 7%
  }

  .tracker_o[data-state="18"] {
    left: 70%;
    top: 3%
  }
}


/*standard projects*/
#standard_projects_area {
  font-family: var(--mars-font);
  background-image: url("img/stanproj_hold.png");
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  font-size: calc(var(--stan-width) * 0.07);
  width: calc(var(--stan-width));
}

#main_board #standard_projects_area {
  top: 48%;
  left: 1%;
}


/* standard projects go there */
#display_main {
  top: 10%;
  width: var(--stan-width);
  height: calc(var(--stan-height)*7);
  padding: unset;
  background-color: unset;
}

.map_4 {
  #standard_projects_area {
    background-position: 0 calc(var(--stan-height) * 7 * -0.12);
    background-size: auto calc(var(--stan-height) * 7 * 1);
    position: relative;
  }

  #standard_projects_title_zone {
    display: none;
  }

  #display_main {
    top: 0%;
  }
}

/* standard projects */
#display_main .card {
  width: 100%;
  height: var(--stan-height);
  /* border: black solid 1px; */
  border-radius: 10em;
  box-shadow: revert;
  background-image: unset;
  background-color: unset;
  position: relative;
  display: block;

  .infobox {
    left: -.6em;
    top: 0.2em;
    bottom: revert;
    right: revert;
    opacity: 0.4;
    color: white;
  }

  &:after {
    content: attr(data-name);
    width: 50%;
    height: 100%;
    text-align: right;
    position: absolute;
    top: 20%;
    right: 3%;
  }

  &:before {
    content: attr(data-cost);
    width: 100%;
    height: 100%;
    left: 10%;
    position: absolute;
    top: 20%;
  }
}

#standard_projects_title_zone {
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  top: 2%;
  left: 11%;
  width: 64%;
  height: 6%;
}


#display_main #card_stanproj_1::before {
  left: 39%;
}


#display_main #card_stanproj_7 {
  background-image: url(img/buffer_gas.png);
  background-size: cover;
}

#standard_projects_area .active_slot.card {
  box-shadow: 0px 0px 0px 3px #ff9800 !important;
}

#counter_display_main {
  display: none;
}

#display_main .card_info_box {
  display: none;
}


.stanp_cost {
  position: relative;
  width: calc(var(--stan-width) * 0.14);
  height: calc(var(--stan-width) * 0.14);
  text-align: center;
  font-family: var(--mars-font);

  left: 4%;
  top: 12%;
}


.stanp_cost.discounted {
  color: #bef983;
  text-shadow: #000 0px 0px 2px, #000 0px 0px 2px, #000 0px 0px 2px, #000 0px 0px 2px, #000 0px 0px 2px, #000 0px 0px 2px;
  outline: calc(var(--card-width) * 0.025) solid #bef983;
  border-radius: calc(var(--card-width) * 0.02);
}


.outer_generation {
  top: 0%;
  right: 12%;
  /*8%*/
  position: absolute;
  width: calc(var(--map-width) * 0.1);
  height: calc(var(--map-width) * 0.1);
  color: white;
  font-size: calc(var(--map-width) * 0.05);
  transform-origin: top right;

  .tracker_gen {
    position: absolute;
    top: 0;
    width: 75%;
    height: 75%;
    display: flex;
    justify-content: center;
    border-radius: 50%;
    left: 12.5%;
    box-shadow: 0 0 0 calc(var(--map-width) * 0.006) #ff000070;
    clip-path: unset;
  }

  .generation_bottom {
    width: 100%;
    height: 25%;
    display: flex;
    position: absolute;
    bottom: 0;
    left: 0;
    justify-content: center;

    #generation_text {
      font-size: calc(var(--map-width) * 0.03);
    }
  }

}

.outer_scoretracker {
  top: 0%;
  right: 0%;
  position: absolute;
  width: calc(var(--map-width) * 0.1);
  height: calc(var(--map-width) * 0.1);
  color: white;
  font-size: calc(var(--map-width) * 0.05);
  display: flex;
  cursor: help;

  .fa {
    position: absolute;
    top: 15%;
    width: 75%;
    height: 75%;
    display: flex;
    justify-content: center;
    border-radius: 50%;
    left: 12.5%;
  }

  .generation_bottom {
    width: 100%;
    height: 25%;
    display: flex;
    position: absolute;
    bottom: 0;
    left: 0;
    justify-content: center;

    #scoretracker_text {
      font-size: calc(var(--map-width) * 0.03);
    }
  }
}

#card_dlg_content {
  position: relative;
  justify-content: space-around;
  align-items: flex-start;
  display: flex;
  flex-wrap: wrap;
  margin-top: 33px;

  .counter {
    position: absolute;
    display: none;
  }

  .card {
    opacity: 1;
    position: relative;
    color: black;
    margin-right: 4px;
    margin-bottom: 4px;
  }

}

.twoplayers #milestone_award_gain_2 {
  display: none;
}

.solo_game {
  #main_board #standard_projects_area {
    bottom: 5%;
    left: 2%;
  }
}

.reveal {
  width: var(--card-width);
  height: var(--card-height);
  position: absolute;
  top: 0px;
  z-index: 30;
  pointer-events: none;
}

#decks_area .reveal .card {
  width: var(--card-width);
  height: var(--card-height);
}


.terraforming_complete {
  background: #c41010;
  font-family: var(--mars-font);
  color: #ffe188;
  display: flex;
  width: 100%;
  justify-content: center;
  align-items: center;
  font-size: larger;
}